allprojects {
    group = 'com.thoughtworks.i1'
    version = '0.1.0-SNAPSHOT'

    apply plugin: 'java'
    apply plugin: 'idea'
}

subprojects {
    apply plugin: 'maven'

    repositories {
        mavenCentral()
        mavenRepo url: "http://download.java.net/maven/2", artifactUrls: ["http://maven.springframework.org/milestone", "https://repository.jboss.org/nexus/content/groups/public/", "http://mvnrepository.com/artifact"]
    }

    sourceCompatibility = '1.7'

    dependencies {
        def slf4jVersion = '1.7.2'
        def guavaVersion = '13.0.1'
        def jerseyVersion = '1.16'

        def junitVersion = '4.10'
        def mockitoVersion = '1.9.5-rc1'
        def hamCrestVersion = '1.1'

        compile "com.google.guava:guava:$guavaVersion"
        compile "com.google.inject.extensions:guice-servlet:3.0"
        compile "com.google.inject:guice:3.0'"
        compile "com.sun.jersey:jersey-core:$jerseyVersion"
        compile "org.slf4j:log4j-over-slf4j:$slf4jVersion"
        compile "org.slf4j:log4j-over-slf4j:$slf4jVersion"

        testCompile "junit:junit:$junitVersion"
        testCompile "org.mockito:mockito-all:$mockitoVersion"
        testCompile "org.hamcrest:hamcrest-all:$hamCrestVersion"
    }

    idea {
        module {
            inheritOutputDirs = false
            print project.name + " output dir: " + sourceSets.main.output.resourcesDir
            outputDir = file("out")
            testOutputDir = file("out")
        }
    }

    uploadArchives {
        repositories {
            mavenDeployer {
                repository(url: uri('../repository'))
            }
        }
    }
}
