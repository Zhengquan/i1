allprojects {
    group = 'com.thoughtworks.i1'
    version = '0.1.0-SNAPSHOT'

    apply plugin: 'java'
    apply plugin: 'idea'
}

subprojects {
    apply plugin: 'maven'

    repositories {
        mavenCentral()
        mavenRepo url: "http://download.java.net/maven/2", artifactUrls: ["http://maven.springframework.org/milestone", "https://repository.jboss.org/nexus/content/groups/public/", "http://mvnrepository.com/artifact"]
    }

    sourceCompatibility = '1.7'

    dependencies {
        compile 'javax.servlet:javax.servlet-api:3.0.1'

        def guavaVersion = '13.0.1'
        compile "com.google.guava:guava:$guavaVersion"
        compile "com.google.inject.extensions:guice-servlet:3.0"
        compile "com.google.inject:guice:3.0'"

        def jerseyVersion = '1.16'
        compile "com.sun.jersey:jersey-core:$jerseyVersion"
        compile "com.sun.jersey:jersey-server:$jerseyVersion"
        compile "com.sun.jersey:jersey-servlet:$jerseyVersion"
        compile "com.sun.jersey:jersey-json:$jerseyVersion"
        compile "com.sun.jersey.contribs:jersey-guice:$jerseyVersion"

        def slf4jVersion = '1.7.2'
        compile "org.slf4j:slf4j-api:$slf4jVersion"
        compile "org.slf4j:slf4j-log4j12:$slf4jVersion"

        def jacksonVersion = '2.1.2'
        compile "com.fasterxml.jackson.core:jackson-annotations:$jacksonVersion"
        compile "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
        compile "com.fasterxml.jackson.core:jackson-core:$jacksonVersion"
        compile "com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:$jacksonVersion"

        compile 'javax.validation:validation-api:1.0.0.GA'
        compile 'com.google.code.findbugs:jsr305:2.0.1'

        def junitVersion = '4.10'
        def mockitoVersion = '1.9.5-rc1'
        def hamCrestVersion = '1.1'
        testCompile "junit:junit:$junitVersion"
        testCompile "org.mockito:mockito-all:$mockitoVersion"
        testCompile "org.hamcrest:hamcrest-all:$hamCrestVersion"
        testCompile "com.sun.jersey:jersey-client:$jerseyVersion"
        testCompile "com.sun.jersey:jersey-test-framework:$jerseyVersion"
    }

    idea {
        module {
            inheritOutputDirs = false
            print project.name + " output dir: " + sourceSets.main.output.resourcesDir
            outputDir = file("out")
            testOutputDir = file("out")
        }
    }

    uploadArchives {
        repositories {
            mavenDeployer {
                repository(url: uri('../repository'))
            }
        }
    }
}
